<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Classified: For Maiko ‚ù§Ô∏è</title>
<script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
<style>
  * { margin: 0; padding: 0; box-sizing: border-box; }
  :root { 
    --bg-1: #fff0f3; --bg-2: #ffccd5; --accent: #ff4d6d; 
    --text: #590d22; --card-bg: rgba(255, 255, 255, 0.95); 
  }

  body { 
    background: var(--bg-1); display: flex; justify-content: center; align-items: center; 
    min-height: 100vh; font-family: -apple-system, sans-serif; overflow: hidden; perspective: 1000px;
  }

  /* --- Cursor Sparkles --- */
  .cursor-sparkle {
    position: fixed; width: 10px; height: 10px; background: var(--accent);
    border-radius: 50%; pointer-events: none; z-index: 9999;
    transition: transform 0.1s, opacity 0.5s; opacity: 0.6;
  }

  /* --- Background & Emojis --- */
  #bg-gradient {
    position: fixed; top: -10%; left: -10%; width: 120%; height: 120%;
    background: radial-gradient(circle, var(--bg-1) 0%, var(--bg-2) 100%);
    z-index: -2; transition: all 0.8s ease;
  }
  .floating-emoji {
    position: absolute; bottom: -50px; font-size: 1.5rem; opacity: 0.6; z-index: -1;
    animation: floatUp var(--duration) linear forwards;
  }
  @keyframes floatUp {
    0% { transform: translateY(0) rotate(0deg); opacity: 0; }
    10% { opacity: 0.6; }
    100% { transform: translateY(-110vh) rotate(360deg); opacity: 0; }
  }

  /* --- 1. Login Screen --- */
  #login-screen {
    position: fixed; top: 0; left: 0; width: 100%; height: 100%;
    background: #000; display: flex; flex-direction: column;
    justify-content: center; align-items: center; z-index: 1000;
    transition: all 1.5s cubic-bezier(0.7, 0, 0.3, 1), background-color 0.3s ease;
  }

  /* New Red Beat Animation */
  #login-screen.red-beat {
    background-color: #800000 !important; /* Deep Red */
    animation: pulseRed 0.4s ease-out;
  }

  @keyframes pulseRed {
    0% { transform: scale(1); }
    50% { transform: scale(1.05); }
    100% { transform: scale(1); }
  }

  #login-screen.unlocked { opacity: 0; transform: scale(5); filter: blur(40px) brightness(8); pointer-events: none; }
  .login-container { text-align: center; font-family: 'Courier New', monospace; width: 100%; }
  #login-header { color: #ff0000; letter-spacing: 3px; margin-bottom: 20px; font-size: 1.5rem; transition: color 0.3s; }
  #pass-input { background: transparent; border: 2px solid #ff0000; padding: 12px; color: white; text-align: center; border-radius: 8px; width: 250px; outline: none; font-size: 1.2rem; }
  
  .rumble { animation: vibe 0.1s infinite; }
  @keyframes vibe { 0% { transform: translate(1px, 1px); } 50% { transform: translate(-1px, -1px); } 100% { transform: translate(1px, -1px); } }

  /* --- 2. Tracing Screen --- */
  #tracing-container {
    position: fixed; top: 0; left: 0; width: 100%; height: 100%;
    display: none; flex-direction: column; justify-content: center;
    align-items: center; z-index: 9999; background: var(--bg-1);
    transition: opacity 0.8s ease, transform 0.8s ease;
  }
  #tracing-canvas { touch-action: none; cursor: crosshair; }
  .trace-hint { color: var(--accent); font-weight: bold; margin-bottom: 15px; letter-spacing: 2px; animation: pulse 1.5s infinite; }

  /* --- 3. The Card --- */
  .card { 
    background: var(--card-bg); padding: 40px; border-radius: 30px; 
    box-shadow: 0 20px 50px rgba(0, 0, 0, 0.1); text-align: center; 
    max-width: 450px; width: 100%; z-index: 10;
    display: none; opacity: 0; transform: scale(0.2);
    transition: transform 0.1s ease-out, background 0.5s ease;
  }
  .card.show { display: block; opacity: 1; transform: scale(1); transition: all 1.2s cubic-bezier(0.175, 0.885, 0.32, 1.275); }

  /* UI Extras */
  #flash { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: white; opacity: 0; z-index: 1001; pointer-events: none; transition: opacity 0.6s; }
  .heart { color: var(--accent); font-size: 70px; display: inline-block; animation: beat 1.2s infinite ease-in-out; cursor: pointer; transition: color 0.5s ease; }
  h1 { color: var(--accent); font-size: 2.2rem; margin: 20px 0; transition: all 0.5s; }
  .message-container { max-height: 280px; overflow-y: auto; text-align: left; padding: 10px; }
  p { color: var(--text); font-size: 1.1rem; line-height: 1.6; }
  .highlight { color: var(--accent); font-weight: bold; }
  .footer-text { margin-top: 20px; font-weight: bold; letter-spacing: 2px; opacity: 0; animation: colorPulse 3s infinite alternate; }
  
  @keyframes pulse { 50% { opacity: 0.3; } }
  @keyframes beat { 50% { transform: scale(1.15); } }
  @keyframes colorPulse { 0% { color: #ff4d6d; } 50% { color: #0284c7; } 100% { color: #ff758f; } }
</style>
</head>
<body>
  <div id="flash"></div>

  <div id="login-screen">
    <div class="login-container" id="login-box">
      <h2 id="login-header">AUTHORIZATION REQUIRED</h2>
      <input type="password" id="pass-input" placeholder="Type here..." autofocus>
      <p style="color: #444; font-size: 0.8rem; margin-top: 15px; max-width: 300px; margin-left: auto; margin-right: auto; line-height: 1.4;">HINT: The word we say every time we wake up in the morning</p>
    </div>
  </div>

  <div id="tracing-container">
    <p class="trace-hint">TRACE THE HEART TO UNLOCK ‚ù§Ô∏è</p>
    <canvas id="tracing-canvas"></canvas>
  </div>

  <div id="bg-gradient"></div>
  <div class="card" id="card">
    <div class="heart" id="interactive-heart" onclick="handleHeartClick()">‚ù§Ô∏è</div>
    <h1 id="title">Click the heart, Maiko!</h1>
    <div id="reveal-section" style="display:none; opacity:0; transition: opacity 0.8s;">
      <div class="message-container"><p id="message"></p></div>
      <div class="footer-text" id="footer">HAPPY BIRTHDAY MAIKO!</div>
    </div>
  </div>

  <script>
    const canvas = document.getElementById('tracing-canvas');
    const ctx = canvas.getContext('2d');
    const card = document.getElementById('card');
    const tracingContainer = document.getElementById('tracing-container');
    const loginScreen = document.getElementById('login-screen');
    const loginHeader = document.getElementById('login-header');
    let points = [];
    let isTracing = false;

    // --- 1. Password Logic ---
    document.getElementById('pass-input').addEventListener('keypress', (e) => {
      if (e.key === 'Enter') {
        const val = e.target.value.toUpperCase();
        if (val === 'BEN') {
          loginScreen.classList.add('rumble');
          loginHeader.innerText = "ACCESS GRANTED";
          loginHeader.style.color = "#fff";
          setTimeout(() => {
            loginScreen.classList.add('unlocked');
            setTimeout(() => {
              document.getElementById('flash').style.opacity = 1;
              setTimeout(() => {
                document.getElementById('flash').style.opacity = 0;
                startTracingMode();
              }, 400);
            }, 800);
          }, 1200);
        } else {
          // --- WRONG PASSWORD BEAT ---
          loginScreen.classList.add('red-beat');
          loginHeader.innerText = "ACCESS DENIED";
          e.target.value = ''; // Clear input
          
          setTimeout(() => {
            loginScreen.classList.remove('red-beat');
            loginHeader.innerText = "AUTHORIZATION REQUIRED";
          }, 400);
        }
      }
    });

    // --- 2. Tracing Logic ---
    function startTracingMode() {
      tracingContainer.style.display = 'flex';
      canvas.width = 320; canvas.height = 320;
      for (let t = 0; t <= Math.PI * 2; t += 0.05) {
        const x = 16 * Math.pow(Math.sin(t), 3);
        const y = -(13 * Math.cos(t) - 5 * Math.cos(2 * t) - 2 * Math.cos(3 * t) - Math.cos(4 * t));
        points.push({ x: x * 8.5 + 160, y: y * 8.5 + 150, hit: false });
      }
      requestAnimationFrame(drawLoop);
    }

    function drawLoop() {
      ctx.clearRect(0, 0, 320, 320);
      points.forEach(p => {
        ctx.fillStyle = p.hit ? '#ff4d6d' : '#ffccd5';
        ctx.beginPath(); ctx.arc(p.x, p.y, p.hit ? 9 : 5, 0, Math.PI*2); ctx.fill();
      });
      if (points.every(p => p.hit)) {
        confetti({ particleCount: 200, spread: 100, origin: { y: 0.6 } });
        tracingContainer.style.opacity = '0';
        tracingContainer.style.transform = 'scale(1.5)';
        setTimeout(() => {
          tracingContainer.style.display = 'none';
          card.classList.add('show');
        }, 800);
      } else { requestAnimationFrame(drawLoop); }
    }

    const moveHandler = (e) => {
      if (!isTracing) return;
      const rect = canvas.getBoundingClientRect();
      const x = (e.clientX || (e.touches && e.touches[0].clientX)) - rect.left;
      const y = (e.clientY || (e.touches && e.touches[0].clientY)) - rect.top;
      points.forEach(p => { if (Math.hypot(p.x - x, p.y - y) < 35) p.hit = true; });
    };

    canvas.addEventListener('mousedown', () => isTracing = true);
    canvas.addEventListener('touchstart', (e) => { isTracing = true; e.preventDefault(); }, {passive: false});
    window.addEventListener('mouseup', () => isTracing = false);
    window.addEventListener('touchend', () => isTracing = false);
    canvas.addEventListener('mousemove', moveHandler);
    canvas.addEventListener('touchmove', e => { e.preventDefault(); moveHandler(e); }, {passive: false});

    // --- 3. Interaction & Sparkles ---
    let themeIndex = 0;
    let isRevealed = false;
    const themes = [
      { bg1: '#fff0f3', bg2: '#ffccd5', accent: '#ff4d6d', text: '#590d22' },
      { bg1: '#e0f2fe', bg2: '#7dd3fc', accent: '#0284c7', text: '#0c4a6e' },
      { bg1: '#1a1a2e', bg2: '#16213e', accent: '#e94560', text: '#ffffff' },
      { bg1: '#fff8e1', bg2: '#ffecb3', accent: '#ffa000', text: '#5d4037' }
    ];

    function handleHeartClick() {
      if (!isRevealed) {
        revealEverything();
        isRevealed = true;
      } else {
        themeIndex = (themeIndex + 1) % themes.length;
        const t = themes[themeIndex];
        const root = document.documentElement;
        root.style.setProperty('--bg-1', t.bg1);
        root.style.setProperty('--bg-2', t.bg2);
        root.style.setProperty('--accent', t.accent);
        root.style.setProperty('--text', t.text);
        confetti({ particleCount: 50, spread: 60, colors: [t.accent, '#fff'] });
      }
    }

    document.addEventListener('mousemove', (e) => {
      const sparkle = document.createElement('div');
      sparkle.className = 'cursor-sparkle';
      sparkle.style.left = e.clientX + 'px'; sparkle.style.top = e.clientY + 'px';
      document.body.appendChild(sparkle);
      setTimeout(() => { sparkle.style.transform = 'scale(0)'; sparkle.style.opacity = '0'; setTimeout(() => sparkle.remove(), 500); }, 50);

      const moveX = (e.clientX - window.innerWidth / 2) * 0.015;
      const moveY = (e.clientY - window.innerHeight / 2) * 0.015;
      const bg = document.getElementById('bg-gradient');
      if(bg) bg.style.transform = `translate(${-moveX}px, ${-moveY}px)`;
      card.style.transform = `rotateY(${moveX * 0.8}deg) rotateX(${-moveY * 0.8}deg)`;
    });

    setInterval(() => {
      const emoji = document.createElement('div');
      emoji.className = 'floating-emoji';
      emoji.innerText = ['üéÇ', '‚ù§Ô∏è', 'üíñ', 'üéÅ', '‚ú®', 'üéà', 'üç∞'][Math.floor(Math.random() * 7)];
      emoji.style.left = Math.random() * 100 + 'vw';
      emoji.style.setProperty('--duration', Math.random() * 5 + 5 + 's');
      document.body.appendChild(emoji);
      setTimeout(() => emoji.remove(), 10000);
    }, 600);

    // --- 4. Content Reveal ---
    function revealEverything() {
      const title = document.getElementById('title');
      title.style.opacity = 0;
      setTimeout(() => { title.innerText = "Wait for it..."; title.style.opacity = 1; }, 300);
      setTimeout(() => title.style.opacity = 0, 1300);
      setTimeout(() => {
        title.innerText = "Happy 22nd Birthday!"; title.style.opacity = 1;
        const rs = document.getElementById('reveal-section');
        rs.style.display = 'block';
        setTimeout(() => { rs.style.opacity = 1; document.getElementById('footer').style.opacity = 1; typeWriter(); }, 100);
        confetti({ particleCount: 150, spread: 70, origin: { y: 0.6 } });
      }, 1600);
    }

    function typeWriter() {
      const full = `Hi Maiko!! Happy 22nd Birthday! At last, the age gap has officially disappeared. Sorry if I couldn't make the birthday card you showed me, as you know I'm not really an arts and crafts person myself, <span class="highlight">HOWEVER I am a DIGITALLY CREATIVE person HEHEHE, kaya I made this for YOU!!!</span><br><br>I hope you like it, I just wanna tell you that I'm extremely grateful for being my pinaka favorite person, you are my safe place, where I can show off my goofiest side, and my daily dose of happiness, love, and affection.<br><br>Everything about you is special, and I can't believe I'm dating someone like you! <span class="highlight">YOU ARE THE LOVE OF MY LIFE!!!</span> I‚Äôm so proud and in love of the person you are and everything you‚Äôre becoming. I LOVE YOU SO SO SO MUCH!!<br><br>I hope you enjoy your day kahit our plan is simple lang. Cheers to lasting til death and for the memories we make. <span class="highlight">HAPPY BIRTHDAY!! I love you!!</span>`;
      let i = 0;
      const el = document.getElementById("message");
      function type() {
        if (i < full.length) {
          if (full.charAt(i) === '<') i = full.indexOf('>', i) + 1;
          else i++;
          el.innerHTML = full.substring(0, i);
          setTimeout(type, 15);
        }
      }
      type();
    }
  </script>
</body>
</html>
